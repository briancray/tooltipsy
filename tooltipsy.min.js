/* tooltipsy by Brian Cray
 * Lincensed under GPL2 - http://www.gnu.org/licenses/gpl-2.0.html
 * Option quick reference:
 * - alignTo: "element" or "cursor" (Defaults to "element")
 * - offset: Tooltipsy distance from element or mouse cursor, dependent on alignTo setting. Set as array [x, y] (Defaults to [0, -1])
 * - content: HTML or text content of tooltip. Defaults to "" (empty string), which pulls content from target element's title attribute
 * - show: function(event, tooltip) to show the tooltip. Defaults to a show(100) effect
 * - hide: function(event, tooltip) to hide the tooltip. Defaults to a fadeOut(100) effect
 * - delay: A delay in milliseconds before showing a tooltip. Set to 0 for no delay. Defaults to 200
 * - css: object containing CSS properties and values. Defaults to {} to use stylesheet for styles
 * - className: DOM class for styling tooltips with CSS. Defaults to "tooltipsy"
 * - showEvent: Set a custom event to bind the show function. Defaults to mouseenter
 * - hideEvent: Set a custom event to bind the show function. Defaults to mouseleave
 * Method quick reference:
 * - $('element').data('tooltipsy').show(): Force the tooltip to show
 * - $('element').data('tooltipsy').hide(): Force the tooltip to hide
 * - $('element').data('tooltipsy').destroy(): Remove tooltip from DOM
 * More information visit http://tooltipsy.com/
 */
(function(d){d.tooltipsy=function(b,a){this.options=a;this.$el=d(b);this.title=this.$el.attr("title")||"";this.$el.attr("title","");this.random=parseInt(1E4*Math.random());this.shown=this.ready=!1;this.height=this.width=0;this.delaytimer=null;this.$el.data("tooltipsy",this);this.init()};d.tooltipsy.prototype={init:function(){var b=this,a,e=b.$el,f=e[0];b.settings=a=d.extend({},b.defaults,b.options);a.delay=+a.delay;"function"===typeof a.content&&b.readify();a.showEvent===a.hideEvent&&"click"===a.showEvent?
    e.toggle(function(c){b.beforeShow(c);"click"===a.showEvent&&"A"==f.tagName&&c.preventDefault();0<a.delay?b.delaytimer=window.setTimeout(function(){b.show(c)},a.delay):b.show(c)},function(c){"click"===a.showEvent&&"A"==f.tagName&&c.preventDefault();window.clearTimeout(b.delaytimer);b.delaytimer=null;b.hide(c)}):e.bind(a.showEvent,function(c){b.beforeShow(c);"click"===a.showEvent&&"A"==f.tagName&&c.preventDefault();b.delaytimer=window.setTimeout(function(){b.show(c)},a.delay||0)}).bind(a.hideEvent,
    function(c){"click"===a.showEvent&&"A"==f.tagName&&c.preventDefault();window.clearTimeout(b.delaytimer);b.delaytimer=null;b.hide(c)})},show:function(b){var a=this.settings,e=this.$tipsy,f=this.$el,c=this.offset(f[0]);if(!1===this.shown){var g=a.css,h=0,k;for(k in g)g.hasOwnProperty(k)&&h++;0<h&&this.$tip.css(a.css);this.width=e.outerWidth();this.height=e.outerHeight()}"cursor"===a.alignTo&&b?(a=[b.clientX+a.offset[0],b.clientY+a.offset[1]],d(window).width()):a=[0>a.offset[0]?c.left-Math.abs(a.offset[0])-
this.width:0===a.offset[0]?c.left-(this.width-f.outerWidth())/2:c.left+f.outerWidth()+a.offset[0],0>a.offset[1]?c.top-Math.abs(a.offset[1])-this.height:0===a.offset[1]?c.top-(this.height-this.$el.outerHeight())/2:c.top+this.$el.outerHeight()+a.offset[1]];e.css({top:a[1]+"px",left:a[0]+"px"});this.settings.show(b,e.stop(!0,!0))},beforeShow:function(b){!1===this.ready&&this.readify();this.settings.beforeShow(b,this.$tipsy)},hide:function(b){var a=this;!1!==a.ready&&(b&&b.relatedTarget===a.$tip[0]?a.$tip.bind("mouseleave",
    function(b){b.relatedTarget!==a.$el[0]&&a.settings.hide(b,a.$tipsy.stop(!0,!0))}):a.settings.hide(b,a.$tipsy.stop(!0,!0)))},readify:function(){this.ready=!0;this.$tipsy=d('<div id="tooltipsy'+this.random+'" style="position:fixed;z-index:2147483647;display:none">').appendTo("body");this.$tip=d('<div class="'+this.settings.className+'">').appendTo(this.$tipsy);this.$tip.data("rootel",this.$el);var b=this.$el,a=this.$tip;this.$tip.html(""!=this.settings.content?"string"==typeof this.settings.content?
    this.settings.content:this.settings.content(b,a):this.title)},offset:function(b){return this.$el[0].getBoundingClientRect()},destroy:function(){this.$tipsy&&(this.$tipsy.remove(),d.removeData(this.$el,"tooltipsy"))},defaults:{alignTo:"element",offset:[0,-1],content:"",show:function(b,a){a.fadeIn(100)},beforeShow:function(b,a){},hide:function(b,a){a.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:"mouseleave"}};d.fn.tooltipsy=function(b){return this.each(function(){new d.tooltipsy(this,
    b)})}})(jQuery);